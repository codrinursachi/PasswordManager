<Window x:Class="PasswordManager.Views.PasswordCreationView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PasswordManager.Views" xmlns:viewModel="clr-namespace:PasswordManager.ViewModels" xmlns:customcontrols="clr-namespace:PasswordManager.CustomControls"
        mc:Ignorable="d"
        Title="PasswordCreationView" Height="700" Width="800"
        WindowStyle="None"
        Background="Transparent"
        AllowsTransparency="True"
        WindowStartupLocation="CenterScreen">
    <Window.DataContext>
        <viewModel:PasswordCreationViewModel/>
    </Window.DataContext>
    <Border CornerRadius="10"
        BorderThickness="1">
        <Border.BorderBrush>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="{StaticResource winBorderColor1}" Offset="0"/>
                <GradientStop Color="{StaticResource winBorderColor2}" Offset="0.75"/>
                <GradientStop Color="{StaticResource winBorderColor3}" Offset="1"/>
            </LinearGradientBrush>
        </Border.BorderBrush>
        <Border.Background>
            <LinearGradientBrush StartPoint="1,1" EndPoint="0,0">
                <GradientStop Color="{StaticResource primaryBackColor1}" Offset="0"/>
                <GradientStop Color="{StaticResource primaryBackColor2}" Offset="1"/>
            </LinearGradientBrush>
        </Border.Background>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="25"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <TextBlock Text="Create Password"
                           Foreground="DarkGray"
                           FontSize="12"
                           FontFamily="Montserrat"
                           Grid.Column="0"
                           VerticalAlignment="Center"
                           Margin="10,0,0,0"/>
            <StackPanel x:Name="pnlControlBar"
                        Grid.Row="0"
                        Orientation="Horizontal"
                        FlowDirection="RightToLeft"
                        Background="Transparent"
                        Margin="0,0,5,0"
                        MouseLeftButtonDown="pnlControlBar_MouseLeftButtonDown">

                <Button x:Name="btnClose"
                        Style="{StaticResource controlButton}"
                        Tag="{StaticResource color4}"
                        Content="X"
                        Click="btnClose_Click">

                </Button>

                <Button x:Name="btnMinimize"
                        Style="{StaticResource controlButton}"
                        Tag="{StaticResource color8}"
                        Content="_"
                        Click="btnMinimize_Click">

                </Button>

            </StackPanel>
            <StackPanel  Orientation="Vertical"
                         Width="300"
                         Margin="25"
                         Grid.Row="1">

                <TextBlock Text="Username"
                           Style="{StaticResource inputLabel}"/>

                <TextBox x:Name="txtUser"
                         Style="{StaticResource textInput}"
                         Text="{Binding Username}">

                    <TextBox.Background>
                        <ImageBrush ImageSource="/Images/user-icon.png"
                                    Stretch="None"
                                    AlignmentX="Left"/>
                    </TextBox.Background>
                </TextBox>

                <TextBlock Text="Password"
                       Style="{StaticResource inputLabel}"/>


                <customcontrols:BindablePasswordBox Password="{Binding Password, Mode=TwoWay}"
                                    Height="28"
                                    Margin="0,5,0,0">

                </customcontrols:BindablePasswordBox>


                <TextBlock Text="URL"
                           Style="{StaticResource inputLabel}"/>

                <TextBox x:Name="txtURL"
                         Text="{Binding Url}"
                         Style="{StaticResource textInput}"/>

                <TextBlock Text="Expiration date"
                           Style="{StaticResource inputLabel}"/>

                <DatePicker x:Name="datePicker" 
                            Foreground="Transparent"
                            BorderThickness="0,0,0,1"
                            SelectedDate="{Binding ExpirationDate}" GotMouseCapture="datePicker_GotMouseCapture" KeyUp="datePicker_KeyUp">
                    <DatePicker.Resources>
                        <Style TargetType="{x:Type DatePickerTextBox}" >
                            <Setter Property="Background" Value="Transparent" />
                        </Style>
                    </DatePicker.Resources>
                </DatePicker>

                <TextBlock Text="CategoryPath"
                           Style="{StaticResource inputLabel}"/>

                <ComboBox x:Name="txtCat"
                          ItemsSource="{Binding CategoryPaths}"
                         Text="{Binding CategoryPath}"
                         Style="{StaticResource comboInput}"
                          IsEditable="True"/>

                <TextBlock Text="Tags"
                    Style="{StaticResource inputLabel}"/>

                <TextBox x:Name="txtTag"
                  Text="{Binding Tags}"
                  Style="{StaticResource textInput}"
                         KeyDown="txtTag_KeyDown"/>

                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Favorite"
                    Style="{StaticResource inputLabel}"/>

                    <CheckBox x:Name="chkFav"
                              IsChecked="{Binding Favorite}"
                              Style="{StaticResource checkbox}"
                              Margin="20,0,0,0"/>
                </StackPanel>

                <TextBlock Text="Database"
                    Style="{StaticResource inputLabel}"/>

                <ComboBox Style="{StaticResource comboInput}" 
                          ItemsSource="{Binding DatabaseItems}"
                          SelectedItem="{Binding Database}"
                          Text="{Binding Database}"
                          IsEditable="True"/>

                <TextBlock Text="Notes"
                           Style="{StaticResource inputLabel}"/>

                <TextBox x:Name="notes"
                         AcceptsReturn="True"
                         Text="{Binding Notes}"
                         Style="{StaticResource textInput}"/>

                <Button x:Name="btnAdd"
                        Command="{Binding AddPasswordCommand}"
                        Grid.Column="2"
                        Content="Add"
                        Style="{StaticResource actionButton}"/>

            </StackPanel>
        </Grid>


    </Border>
</Window>
